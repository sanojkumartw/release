resources:
  pipelines:
    orders_pipeline:
      name: "{{ cookiecutter.project_slug }}-elt-pipeline"
      photon: false
      catalog: ctl_${bundle.target}_sales
      schema: sch_bronze
      clusters:
        - label: default
          autoscale:
            min_workers: 1
            max_workers: 5
          node_type_id: i3.xlarge
      libraries:
        - file:
            path: ../../src/dlt_pipelines/orders/bronze.py
        - file:
            path: ../../src/dlt_pipelines/orders/silver.py

      configuration:
        bundle.sourcePath: ${workspace.file_path}/src
        raw.bucket: ${var.RAW_DATA_S3_BUCKET}

      tags:
        env: ${bundle.target}
        data_product_name: {{ cookiecutter.project_slug }}
        data_product_id: {{ cookiecutter.project_slug }}
        domain: {{ cookiecutter.data_product_id }}
        # owner: data_team
        # cost_center: data_engineering
        # data_classification: internal